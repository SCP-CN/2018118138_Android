# 广播
Android提供了一套完整的API，允许应用程序自由地发送和接收广播。Android中的每个应用程序都可以对自己感兴趣的广播进行注册，这样该程序就只会接收到自己所关心的广播内容，这些广播可能是来自系统的，也可能来自其它应用程序。

## 接收系统广播
Android内置了很多系统级别的广播，我们可以在应用程序中通过监听这些广播来得到各种系统的状态信息，例如网络是否畅通。<br/>

接收广播需要广播接收器，这需要我们新建类继承自BroadcastReceiver，并重写其中的onReceive()方法，例如在该方法中调用Toast来发出提示。<br/>

在主活动的onCreater()方法中设置好IntentFilter，用来挑选接收的广播类型，这里我们选择接收系统网络状态变化时会发出的一条广播："android.net.conn.CONNECTIVITY_CHANGE"，再进行广播接收器的注册。
```
	intentFilter = new IntentFilter();
    intentFilter.addAction("android.net.conn.CONNECTIVITY_CHANGE");
    networkChangeReceiver = new NetworkChangeReceiver();
    registerReceiver(networkChangeReceiver,intentFilter);
```
注意接收器注册后需要取消注册，所以需要在onDestroy()中调用unregisterRecevier()，这样程序关闭的时候接收器也取消注册了。
```
	protected void onDestory(){
        super.onDestroy();
        unregisterReceiver(networkChangeReceiver);
    }
```
另外，Android系统为了保护用户的安全和隐私，如果程序需要进行一些对用户来说比较敏感的操作，就必须在配置文件中声明权限。在AndroidManifest.xml文件中声明权限：
```
	<manifest ...>
		...
		<uses-permission 	android:name="android.permission.ACCESS_NETWORK_STATE" />
		...
	</manifest>
```
打开程序，再打开或关闭网络数据，程序都会发出提示：
<br/>
![网络畅通](/BroadcastTest/img/网络畅通.png) ![网络不可用](/BroadcastTest/img/网络不可用.png)
<br/>

## 自定义广播
